(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[970],{2355:(e,s,t)=>{"use strict";t.d(s,{V:()=>n});var r=t(5155);t(2115);var a=t(6874),i=t.n(a),l=t(6766);function n(e){let{currentPage:s="home",showAdminLink:t=!0}=e;return(0,r.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,r.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center h-auto sm:h-16 py-3 sm:py-0",children:[(0,r.jsx)("div",{className:"flex flex-col sm:flex-row items-center space-y-2 sm:space-y-0 sm:space-x-4 mb-3 sm:mb-0",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(l.default,{src:"/SPUP-final-logo.png",alt:"St. Paul University Philippines",width:40,height:40,className:"w-8 h-8 sm:w-10 sm:h-10",priority:!0,unoptimized:!0,onError:e=>{var s;console.log("Logo failed to load, showing fallback");let t=e.target;t.style.display="none";let r=null==(s=t.parentElement)?void 0:s.querySelector(".logo-fallback");r&&(r.style.display="flex")}}),(0,r.jsx)("div",{className:"logo-fallback w-8 h-8 sm:w-10 sm:h-10 bg-primary-600 rounded-full items-center justify-center text-white font-bold text-xs sm:text-sm",style:{display:"none"},children:"SPUP"}),(0,r.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-3",children:(0,r.jsx)("h1",{className:"text-lg sm:text-xl font-semibold text-gray-900 text-center sm:text-left",children:"Student Clearance System"})})]})}),(0,r.jsx)("div",{className:"flex items-center space-x-2 sm:space-x-4",children:(()=>{let e=[];return"home"!==s&&e.push((0,r.jsx)(i(),{href:"/",className:"text-gray-600 hover:text-gray-900 text-sm font-medium px-3 py-2 rounded-md hover:bg-gray-100 transition-colors",children:"New Submission"},"home")),"track"!==s&&e.push((0,r.jsx)(i(),{href:"/track",className:"text-gray-600 hover:text-gray-900 text-sm font-medium px-3 py-2 rounded-md hover:bg-gray-100 transition-colors",children:"Track Submission"},"track")),t&&"admin"!==s&&e.push((0,r.jsx)(i(),{href:"/admin",className:"text-gray-600 hover:text-gray-900 text-sm font-medium px-3 py-2 rounded-md hover:bg-gray-100 transition-colors",children:"Admin Login"},"admin")),e})()})]})})})}},2615:(e,s,t)=>{"use strict";t.d(s,{W:()=>l});var r=t(5155),a=t(2596),i=t(9688);function l(e){let{status:s,className:t}=e;return(0,r.jsx)("span",{className:function(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,i.QP)((0,a.$)(s))}("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border",(()=>{switch(s){case"Submitted":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"Cleared":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(),t),children:s})}},5860:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x});var r=t(5155),a=t(2115),i=t(9427);function l(e){let{onTrack:s,isLoading:t,error:l}=e,[n,o]=(0,a.useState)(""),[c,d]=(0,a.useState)("");return(0,r.jsx)("div",{className:"max-w-md mx-auto px-4 sm:px-0",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6",children:[(0,r.jsxs)("div",{className:"text-center mb-6",children:[(0,r.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDD0D"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Enter Your Submission ID"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"You received this ID when you submitted your clearance request"})]}),(0,r.jsxs)("form",{onSubmit:e=>(e.preventDefault(),d(""),n.trim())?(0,i.f)(n.trim())?void s(n.trim()):void d("Invalid submission ID format. It should be like: SPUP_Clearance_2025_ABC123"):void d("Please enter your submission ID"),className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"submissionId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Submission ID *"}),(0,r.jsx)("input",{id:"submissionId",type:"text",value:n,onChange:e=>{o(e.target.value),c&&d("")},placeholder:"SPUP_Clearance_2025_ABC123",className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 ".concat(c||l?"border-red-500":"border-gray-300"),disabled:t}),c&&(0,r.jsx)("p",{className:"text-red-600 text-sm mt-1",children:c})]}),l&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:(0,r.jsx)("p",{className:"text-red-600 text-sm",children:l})}),(0,r.jsx)("button",{type:"submit",disabled:t,className:"w-full py-3 rounded-md text-white font-medium transition-colors ".concat(t?"bg-gray-400 cursor-not-allowed":"bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500"),children:t?"Tracking...":"Track Submission"})]}),(0,r.jsxs)("div",{className:" p-4 bg-gray-50 rounded-md",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"\uD83D\uDCA1 Tips:"}),(0,r.jsxs)("ul",{className:"text-xs text-gray-600 space-y-1",children:[(0,r.jsx)("li",{children:"• Copy and paste to avoid typing errors"}),(0,r.jsx)("li",{children:"• Format: SPUP_Clearance_YEAR_XXXXXX"})]})]})]})})}var n=t(6874),o=t.n(n),c=t(2615);function d(e){let s,{submission:t,onReset:a}=e,i=(()=>{switch(t.status){case"Submitted":return{icon:"⏳",title:"Under Review",message:"Your submission is being reviewed by the administration. Please check back later for updates.",color:"text-yellow-700"};case"Cleared":return{icon:"✅",title:"Cleared",message:"Congratulations! Your clearance has been approved. You may proceed with your next steps.",color:"text-green-900"};default:return{icon:"\uD83D\uDCC4",title:"Submitted",message:"Your submission has been received.",color:"text-gray-700"}}})();return(0,r.jsx)("div",{className:"max-w-2xl mx-auto px-4 sm:px-0",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-primary-500 to-primary-600 px-6 py-8 text-white text-center",children:[(0,r.jsx)("div",{className:"text-5xl mb-4",children:i.icon}),(0,r.jsx)("h2",{className:"text-2xl font-bold mb-2 ".concat(i.color),children:i.title}),(0,r.jsx)("p",{className:"mb-4 ".concat(i.color),children:i.message}),(0,r.jsx)("div",{className:"inline-flex items-center bg-white rounded-full px-4 py-2",children:(0,r.jsx)(c.W,{status:t.status})})]}),(0,r.jsxs)("div",{className:"p-4 sm:p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 border-b border-gray-200 pb-2",children:"Submission Information"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Submission ID"}),(0,r.jsx)("p",{className:"text-sm text-gray-900 font-mono bg-gray-50 px-2 py-1 rounded",children:t.id})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Submitted On"}),(0,r.jsx)("p",{className:"text-sm text-gray-900",children:(s=t.submittedAt,new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(s))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Student Name"}),(0,r.jsx)("p",{className:"text-sm text-gray-900",children:t.name})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Student ID"}),(0,r.jsx)("p",{className:"text-sm text-gray-900",children:t.studentId})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Course"}),(0,r.jsx)("p",{className:"text-sm text-gray-900",children:t.course})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 border-b border-gray-200 pb-2",children:"Research Details"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Research Title"}),(0,r.jsx)("p",{className:"text-sm text-gray-900",children:t.researchTitle})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Research Type"}),(0,r.jsx)("p",{className:"text-sm text-gray-900",children:t.researchType})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Academic Level"}),(0,r.jsx)("p",{className:"text-sm text-gray-900 capitalize",children:t.level})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Adviser"}),(0,r.jsx)("p",{className:"text-sm text-gray-900",children:t.adviser})]})]})]})]}),"undergrad"===t.level&&t.groupMembers&&t.groupMembers.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 border-b border-gray-200 pb-2 mb-3",children:"Group Members"}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:t.groupMembers.map((e,s)=>(0,r.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.studentID})]},s))})]}),(0,r.jsxs)("div",{className:"bg-primary-50 border border-primary-200 rounded-md p-4",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-primary-800 mb-2",children:"\uD83D\uDCCB Next Steps:"}),(0,r.jsxs)("ul",{className:"text-sm text-primary-700 space-y-1",children:["Submitted"===t.status&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("li",{children:"• Your submission is under review"}),(0,r.jsx)("li",{children:"• You will be notified once the review is complete"}),(0,r.jsx)("li",{children:"• No further action required at this time"})]}),"Cleared"===t.status&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("li",{children:"• Your clearance is approved!"}),(0,r.jsx)("li",{children:"• You may proceed with your graduation requirements"}),(0,r.jsx)("li",{children:"• Contact your department for the next steps"})]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t border-gray-200",children:[(0,r.jsx)("button",{onClick:a,className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Track Another Submission"}),(0,r.jsx)(o(),{href:"/",className:"flex-1 text-center px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-md text-sm font-medium transition-colors",children:"Submit New Request"})]})]})]})})}var m=t(2355),u=t(6316);function x(){let[e,s]=(0,a.useState)(null),[t,i]=(0,a.useState)(!1),[n,o]=(0,a.useState)(""),c=async e=>{i(!0),o(""),s(null);try{let t=await (0,u.hx)(e);t?s(t):o("Submission not found. Please check your submission ID and try again.")}catch(e){o(e instanceof Error?e.message:"Failed to track submission. Please try again.")}finally{i(!1)}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(m.V,{currentPage:"track",showAdminLink:!1}),(0,r.jsxs)("main",{className:"max-w-4xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Track Your Submission"}),(0,r.jsxs)("p",{className:"text-gray-600 max-w-2xl mx-auto",children:["Enter your submission ID to check the status of your clearance request. Your submission ID follows the format: ",(0,r.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded text-sm",children:"SPUP_Clearance_YYYY_ABC123"})]})]}),e?(0,r.jsx)(d,{submission:e,onReset:()=>{s(null),o("")}}):(0,r.jsx)(l,{onTrack:c,isLoading:t,error:n})]}),(0,r.jsx)("footer",{className:"bg-white border-t mt-16 fixed bottom-0 w-full",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("div",{className:"text-center text-gray-500 text-sm",children:[(0,r.jsx)("p",{children:"\xa9 2025 Student Clearance System. All rights reserved."}),(0,r.jsxs)("p",{className:"mt-2",children:["For assistance, please contact: ",(0,r.jsx)("a",{href:"mailto:cprint@spup.edu.ph",className:"text-primary-600 hover:text-primary-800",children:"cprint@spup.edu.ph"})]})]})})})]})}},6316:(e,s,t)=>{"use strict";t.d(s,{bN:()=>g,wu:()=>y,Rh:()=>p,hx:()=>h,Bh:()=>f,cq:()=>x,qT:()=>b});var r=t(5317),a=t(7505),i=t(5404),l=t(9311),n=t.n(l);let o=(0,t(3915).Wp)({apiKey:"AIzaSyDQ_OoviqBwI2-po-yFgDmElp5Gu1Roos8",authDomain:"student-clearance-acdd8.firebaseapp.com",projectId:"student-clearance-acdd8",storageBucket:"student-clearance-acdd8.firebasestorage.app",messagingSenderId:"384361416984",appId:"1:384361416984:web:088ba8a9f6be56ad8a366d",measurementId:"G-K0FBFQ3WGD"}),c=(0,i.xI)(o),d=(0,r.aU)(o),m=(0,a.c7)(o);var u=t(9427);async function x(e){try{let s=(0,u.g)(),t=new(n());if(e.documents){let s=Object.entries(e.documents).map(async e=>{let[s,r]=e;if(r){let e=r.name.split(".").pop(),a="";switch(s){case"approvalSheet":a="approval_sheet.".concat(e);break;case"fullPaper":a="full_paper.".concat(e);break;case"longAbstract":a="long_abstract.".concat(e);break;case"journalFormat":a="journal_format.".concat(e);break;default:a="".concat(s,".").concat(e)}let i=await r.arrayBuffer();t.file(a,i)}});await Promise.all(s)}let i=await t.generateAsync({type:"blob"}),l="".concat(s,".zip"),o=(0,a.KR)(m,"submissions/".concat(l)),c=await (0,a.D)(o,i),x=await (0,a.qk)(c.ref),h={id:s,level:e.level,name:e.name,email:e.email,studentId:e.studentId,adviser:e.adviser,course:e.course,researchTitle:e.researchTitle,researchType:e.researchType,zipFile:x,status:"Submitted",submittedAt:r.Dc.fromDate(new Date)};if("undergrad"===e.level&&e.groupMembers&&e.groupMembers.length>0){let s=e.groupMembers.filter(e=>e.name.trim()&&e.studentID.trim());s.length>0&&(h.groupMembers=s)}let p=(0,r.H9)(d,"submissions",s);return await (0,r.BN)(p,h),s}catch(e){throw console.error("Error submitting clearance:",e),Error("Failed to submit clearance request. Please try again.")}}async function h(e){try{let t=(0,r.H9)(d,"submissions",e),a=await (0,r.x7)(t);if(!a.exists())return null;{var s;let e=a.data();return{...e,id:a.id,submittedAt:(null==(s=e.submittedAt)?void 0:s.toDate())||new Date}}}catch(e){throw console.error("Error fetching submission:",e),Error("Failed to fetch submission details")}}async function p(e){try{let s=(0,r.rJ)(d,"submissions"),t=[];(null==e?void 0:e.level)&&"all"!==e.level&&t.push((0,r._M)("level","==",e.level)),(null==e?void 0:e.status)&&"all"!==e.status&&t.push((0,r._M)("status","==",e.status)),(null==e?void 0:e.course)&&t.push((0,r._M)("course","==",e.course)),t.push((0,r.My)("submittedAt","desc"));let a=(await (0,r.GG)((0,r.P)(s,...t))).docs.map(e=>{var s;let t=e.data();return{...t,id:e.id,submittedAt:(null==(s=t.submittedAt)?void 0:s.toDate())||new Date}});if(null==e?void 0:e.searchTerm){let s=e.searchTerm.toLowerCase();a=a.filter(e=>e.name.toLowerCase().includes(s)||e.studentId.toLowerCase().includes(s)||e.researchTitle.toLowerCase().includes(s)||e.email.toLowerCase().includes(s))}return a}catch(e){throw console.error("Error fetching submissions:",e),Error("Failed to fetch submissions")}}async function b(e,s){try{let t=(0,r.H9)(d,"submissions",e);await (0,r.mZ)(t,{status:s})}catch(e){throw console.error("Error updating submission status:",e),Error("Failed to update submission status")}}async function g(e,s){try{if("cprint@spup.edu.ph"!==e)throw Error("Unauthorized email address");return(await (0,i.x9)(c,e,s)).user}catch(e){if(console.error("Error during admin login:",e),e&&"object"==typeof e&&"code"in e){if("auth/user-not-found"===e.code)throw Error("Admin account not found");if("auth/wrong-password"===e.code)throw Error("Invalid password");if("auth/invalid-email"===e.code)throw Error("Invalid email format")}if(e instanceof Error&&"Unauthorized email address"===e.message)throw e;throw Error("Login failed. Please try again.")}}async function y(){try{await (0,i.CI)(c)}catch(e){throw console.error("Error during logout:",e),Error("Logout failed")}}function f(e){return(0,i.hg)(c,e)}},9427:(e,s,t)=>{"use strict";function r(){let e=new Date().getFullYear(),s=Math.random().toString(36).substr(2,6).toUpperCase();return"SPUP_Clearance_".concat(e,"_").concat(s)}function a(e){return/^SPUP_Clearance_\d{4}_[A-Z0-9]{6}$/.test(e)}t.d(s,{f:()=>a,g:()=>r})},9958:(e,s,t)=>{Promise.resolve().then(t.bind(t,5860))}},e=>{e.O(0,[135,965,562,441,964,358],()=>e(e.s=9958)),_N_E=e.O()}]);