(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{6867:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>L});var a=t(5155),r=t(2115),l=t(647);function d(e){let{onLoginSuccess:s,isLoading:t=!1}=e,[d,i]=(0,r.useState)({email:"",password:""}),[n,o]=(0,r.useState)(""),[c,m]=(0,r.useState)(!1),x=async e=>{e.preventDefault(),o(""),m(!0);try{let e=await (0,l.bN)(d.email,d.password);s(e)}catch(e){o(e instanceof Error?e.message:"Login failed")}finally{m(!1)}},u=(e,s)=>{i(t=>({...t,[e]:s})),n&&o("")};return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"max-w-md w-full space-y-8 p-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"mt-6 text-center text-3xl font-bold text-gray-900",children:"Admin Login"}),(0,a.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Student Clearance System"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsxs)("form",{onSubmit:x,className:"space-y-6",children:[n&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:(0,a.jsx)("p",{className:"text-red-600 text-sm",children:n})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,a.jsx)("input",{id:"email",type:"email",value:d.email,onChange:e=>u("email",e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"cprint@spup.edu.ph",disabled:c||t})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,a.jsx)("input",{id:"password",type:"password",value:d.password,onChange:e=>u("password",e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Enter your password",disabled:c||t})]}),(0,a.jsx)("button",{type:"submit",disabled:c||t,className:"w-full py-3 px-4 rounded-md text-white font-medium transition-colors ".concat(c||t?"bg-gray-400 cursor-not-allowed":"bg-primary hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary"),children:c?"Signing In...":"Sign In"})]}),(0,a.jsx)("div",{className:"mt-4 text-center",children:(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Only authorized administrators can access this system"})})]})]})})}var i=t(2355);function n(e){let{children:s,user:t,onLogout:r}=e,d=async()=>{try{await (0,l.wu)(),r()}catch(e){console.error("Logout error:",e)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(i.V,{currentPage:"admin",showAdminLink:!1,user:t,onLogout:d}),(0,a.jsx)("main",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:s})]})}var o=t(8776),c=t(4020),m=t(2657),x=t(1788),u=t(1305),h=t(3052),p=t(5196),g=t(9428),b=t(7050);let f=u.bL,y=u.l9;u.YJ,u.ZL,u.Pb,u.z6,r.forwardRef((e,s)=>{let{className:t,inset:r,children:l,...d}=e;return(0,a.jsxs)(u.ZP,{ref:s,className:(0,b.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",r&&"pl-8",t),...d,children:[l,(0,a.jsx)(h.A,{className:"ml-auto h-4 w-4"})]})}).displayName=u.ZP.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(u.G5,{ref:s,className:(0,b.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}).displayName=u.G5.displayName;let j=r.forwardRef((e,s)=>{let{className:t,sideOffset:r=4,...l}=e;return(0,a.jsx)(u.ZL,{children:(0,a.jsx)(u.UC,{ref:s,sideOffset:r,className:(0,b.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...l})})});j.displayName=u.UC.displayName;let v=r.forwardRef((e,s)=>{let{className:t,inset:r,...l}=e;return(0,a.jsx)(u.q7,{ref:s,className:(0,b.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r&&"pl-8",t),...l})});v.displayName=u.q7.displayName,r.forwardRef((e,s)=>{let{className:t,children:r,checked:l,...d}=e;return(0,a.jsxs)(u.H_,{ref:s,className:(0,b.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:l,...d,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(u.VF,{children:(0,a.jsx)(p.A,{className:"h-4 w-4"})})}),r]})}).displayName=u.H_.displayName,r.forwardRef((e,s)=>{let{className:t,children:r,...l}=e;return(0,a.jsxs)(u.hN,{ref:s,className:(0,b.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(u.VF,{children:(0,a.jsx)(g.A,{className:"h-2 h-2 fill-current"})})}),r]})}).displayName=u.hN.displayName,r.forwardRef((e,s)=>{let{className:t,inset:r,...l}=e;return(0,a.jsx)(u.JU,{ref:s,className:(0,b.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",t),...l})}).displayName=u.JU.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(u.wv,{ref:s,className:(0,b.cn)("-mx-1 my-1 h-px bg-muted",t),...r})}).displayName=u.wv.displayName;var N=t(6104),w=t(7505);async function k(e){try{if(!e.zipFile)throw Error("No file available for this submission");let s=e.name.replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g,"_"),t="".concat(s,"_").concat(e.id,".zip"),a=(0,w.KR)(N.IG,"submissions/".concat(t)),r=await (0,w.qk)(a),l="".concat(s,"_").concat(e.id,".zip"),d=document.createElement("a");d.href=r,d.download=l,d.style.display="none",document.body.appendChild(d),d.click(),document.body.removeChild(d)}catch(e){throw e}}var S=t(6671);function C(e){let{isExported:s,exportedAt:t}=e;return s?(0,a.jsx)("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 ml-2",title:"Exported on ".concat(t?new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(t):"Unknown date"),children:(0,a.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})})}):null}function E(e){let{submissions:s,onViewSubmission:t,onFiltersChange:d,isLoading:i=!1,onSubmissionUpdate:n}=e,[u,h]=(0,r.useState)({level:"all",status:"all",course:"",searchTerm:""}),p=(e,s)=>{let t={...u,[e]:s};h(t),d(t)},g=Array.from(new Set(s.map(e=>e.course).filter(Boolean))).sort(),b=async e=>{if(e.isExported)return void S.o.info("This submission was already downloaded and removed from storage.");try{await k(e)}catch(e){S.o.error("Failed to download submission. The file was not removed.");return}try{await (0,l.Vx)(e.id,!0),S.o.success("Downloaded and removed ".concat(e.name,"'s submission from storage.")),n&&n()}catch(e){S.o.warning("Downloaded successfully, but failed to remove from storage. Please try cleanup later.")}};return i?(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading submissions..."})]}):(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"All Submissions"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),(0,a.jsx)("input",{type:"text",placeholder:"Name, ID, or title...",value:u.searchTerm||"",onChange:e=>p("searchTerm",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Level"}),(0,a.jsxs)("select",{value:u.level||"all",onChange:e=>p("level",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"all",children:"All Levels"}),(0,a.jsx)("option",{value:"undergrad",children:"Undergraduate"}),(0,a.jsx)("option",{value:"grad",children:"Graduate"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,a.jsxs)("select",{value:u.status||"all",onChange:e=>p("status",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"all",children:"All Statuses"}),(0,a.jsx)("option",{value:"Submitted",children:"Submitted"}),(0,a.jsx)("option",{value:"Cleared",children:"Cleared"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Course"}),(0,a.jsxs)("select",{value:u.course||"",onChange:e=>p("course",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"All Courses"}),g.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]})]})]}),(0,a.jsx)("div",{className:"hidden md:block overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Research Title"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Level/Type"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Submitted"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===s.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"px-6 py-8 text-center text-gray-500",children:"No submissions found"})}):s.map(e=>{let s;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[e.studentId," • ",e.course]})]})}),(0,a.jsxs)("td",{className:"px-6 py-4",children:[(0,a.jsx)("div",{className:"text-sm text-gray-900 max-w-xs truncate",children:e.researchTitle}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["Adviser: ",e.adviser]})]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-sm text-gray-900 capitalize",children:e.level}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.researchType})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(o.W,{status:e.status}),(0,a.jsx)(C,{isExported:e.isExported,exportedAt:e.exportedAt})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(s=e.submittedAt,new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(s))}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsxs)(f,{children:[(0,a.jsx)(y,{asChild:!0,children:(0,a.jsx)("button",{className:"p-2 hover:bg-gray-100 rounded-md transition-colors",children:(0,a.jsx)(c.A,{className:"h-4 w-4 text-gray-600"})})}),(0,a.jsxs)(j,{align:"end",children:[(0,a.jsxs)(v,{onClick:()=>t(e),children:[(0,a.jsx)(m.A,{className:"h-4 w-4 mr-2"}),(0,a.jsx)("span",{children:"View"})]}),e.isExported&&e.exportLink?(0,a.jsx)(v,{asChild:!0,children:(0,a.jsxs)("a",{href:e.exportLink,target:"_blank",rel:"noopener noreferrer",className:"flex items-center",children:[(0,a.jsx)(x.A,{className:"h-4 w-4 mr-2"}),(0,a.jsx)("span",{children:"Open Export Link"})]})}):(0,a.jsxs)(v,{onClick:()=>b(e),disabled:e.isExported,className:e.isExported?"opacity-50 cursor-not-allowed":"",children:[(0,a.jsx)(x.A,{className:"h-4 w-4 mr-2"}),(0,a.jsx)("span",{className:e.isExported?"text-gray-400":"",children:e.isExported?"Already Downloaded":"Download"})]})]})]})})]},e.id)})})]})}),(0,a.jsx)("div",{className:"md:hidden divide-y divide-gray-200",children:s.map(e=>(0,a.jsxs)("div",{className:"p-4 hover:bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 text-sm",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.studentId})]}),(0,a.jsxs)("div",{className:"flex flex-col items-end space-y-1",children:[(0,a.jsx)(o.W,{status:e.status}),(0,a.jsx)(C,{isExported:e.isExported,exportedAt:e.exportedAt})]})]}),(0,a.jsxs)("div",{className:"space-y-1 text-xs text-gray-600 mb-3",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Course:"})," ",e.course]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Research:"})," ",e.researchTitle]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Level:"})," ",e.level]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Submitted:"})," ",e.submittedAt.toLocaleDateString()]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>t(e),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white text-sm py-2 px-3 rounded-md transition-colors",children:"View Details"}),(0,a.jsx)("button",{onClick:()=>b(e),disabled:e.isExported,className:"flex-1 text-sm py-2 px-3 rounded-md transition-colors ".concat(e.isExported?"bg-gray-400 cursor-not-allowed text-white":"bg-green-600 hover:bg-green-700 text-white"),children:e.isExported?"Already Downloaded":"Download"})]})]},e.id))})]})}function A(e){let s,{submission:t,onClose:d,onUpdate:i}=e,[n,c]=(0,r.useState)(!1),[m,x]=(0,r.useState)(!1),[u,h]=(0,r.useState)(t.exportLink||""),[p,g]=(0,r.useState)(!1),[b,f]=(0,r.useState)(t.exportLink||""),[y,j]=(0,r.useState)(!1);(0,r.useEffect)(()=>{f(t.exportLink||"")},[t.exportLink]);let v=async e=>{c(!0);try{await (0,l.qT)(t.id,e),S.o.success("Status updated to ".concat(e)),i(),d()}catch(e){console.error("Error updating status:",e),S.o.error("Failed to update status. Please try again.")}finally{c(!1)}},N=async()=>{if(t.isExported)return void S.o.info("This submission was already downloaded and removed from storage.");j(!0);try{await k(t),await (0,l.Vx)(t.id,!0),S.o.success("Downloaded and removed ".concat(t.name,"'s submission from storage.")),i()}catch(e){S.o.error("Failed to download submission. The file was not removed.")}finally{j(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2 sm:p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-screen overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center px-6 pt-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center w-full",children:[(0,a.jsxs)("div",{className:"flex flex-col items-start",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Submission Details"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["ID: ",t.id]})]}),(0,a.jsx)("button",{onClick:d,className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\xd7"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4 w-full",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Status:"}),(0,a.jsx)(o.W,{status:t.status})]}),(0,a.jsx)("div",{className:"flex space-x-2",children:t.isExported?(0,a.jsxs)("div",{className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 rounded-md",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"File not available — already exported."}),(0,a.jsx)("button",{type:"button",title:"Set export link",onClick:()=>x(!0),className:"ml-2 text-gray-600 hover:text-gray-800",children:"✎"}),b&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("a",{href:b,target:"_blank",rel:"noopener noreferrer",className:"ml-3 text-blue-600 hover:underline text-sm",children:"Open link"}),(0,a.jsx)("button",{type:"button",onClick:async()=>{try{await (0,l.C)(t.id),f(""),S.o.success("Export link removed"),i()}catch(e){S.o.error("Failed to remove export link")}},className:"ml-2 text-red-600 hover:text-red-700 text-sm",children:"Remove link"})]})]}):(0,a.jsx)("button",{onClick:N,disabled:t.isExported||y,className:"bg-primary hover:bg-primary text-white px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center space-x-2",children:(0,a.jsx)("span",{children:y?"Downloading...":t.isExported?"Already Downloaded":"Download ZIP (".concat(t.id,".zip)")})})})]})]}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 border-b border-gray-200 pb-2",children:"Student Information"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:t.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:t.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Student ID"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:t.studentId})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Course"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:t.course})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Graduation"}),(0,a.jsxs)("p",{className:"text-sm text-gray-900",children:[t.graduationMonth," ",t.graduationYear]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Level"}),(0,a.jsx)("p",{className:"text-sm text-gray-900 capitalize",children:t.level})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 border-b border-gray-200 pb-2",children:"Research Information"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Research Title"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:t.researchTitle})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Research Type"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:t.researchType})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Adviser"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:t.adviser})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Submitted At"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:(s=t.submittedAt,new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(s))})]})]})]})]}),"undergrad"===t.level&&t.groupMembers&&t.groupMembers.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 border-b border-gray-200 pb-2 mb-3",children:"Group Members"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:t.groupMembers.map((e,s)=>(0,a.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.studentID})]},s))})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[(0,a.jsx)("button",{onClick:d,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Close"}),"Submitted"===t.status&&(0,a.jsx)("button",{onClick:()=>v("Cleared"),disabled:n,className:"px-4 py-2 rounded-md text-sm font-medium text-white transition-colors ".concat(n?"bg-gray-400 cursor-not-allowed":"bg-primary hover:bg-primary-700"),children:n?"Updating...":"Mark as Cleared"}),"Cleared"===t.status&&(0,a.jsx)("button",{onClick:()=>v("Submitted"),disabled:n,className:"px-4 py-2 rounded-md text-sm font-medium text-white transition-colors ".concat(n?"bg-gray-400 cursor-not-allowed":"bg-yellow-600 hover:bg-yellow-700"),children:n?"Updating...":"Mark as Submitted"})]}),m&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2 sm:p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Set export link"}),(0,a.jsx)("input",{type:"url",value:u,onChange:e=>h(e.target.value),placeholder:"https://...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 mb-4"}),(0,a.jsxs)("div",{className:"flex justify-between space-x-2",children:[b&&(0,a.jsx)("button",{type:"button",onClick:async()=>{try{await (0,l.C)(t.id),S.o.success("Export link removed"),f(""),h(""),i(),x(!1)}catch(e){S.o.error("Failed to remove export link")}},className:"px-4 py-2 border border-red-300 text-red-600 rounded-md text-sm font-medium hover:bg-red-50",disabled:p,children:"Remove link"}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)("button",{type:"button",onClick:()=>x(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",disabled:p,children:"Cancel"}),(0,a.jsx)("button",{type:"button",onClick:async()=>{if(!u||!/^https?:\/\//i.test(u))return void S.o.error("Please enter a valid URL starting with http or https");g(!0);try{await (0,l.vr)(t.id,u),S.o.success("Export link saved"),f(u),x(!1),i()}catch(e){S.o.error("Failed to save export link")}finally{g(!1)}},className:"px-4 py-2 rounded-md text-sm font-medium text-white ".concat(p?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"),disabled:p,children:p?"Saving...":"Save Link"})]})]})]})})]})]})})}function L(){let[e,s]=(0,r.useState)(null),[t,i]=(0,r.useState)(!0),[o,c]=(0,r.useState)([]),[m,x]=(0,r.useState)([]),[u,h]=(0,r.useState)(null),[p,g]=(0,r.useState)(!1),[b,f]=(0,r.useState)({});(0,r.useEffect)(()=>{let e=(0,l.Bh)(e=>{s(e),i(!1),e&&y()});return()=>e()},[]);let y=async e=>{g(!0);try{let s=await (0,l.Rh)(e);c(s),x(s)}catch(e){console.error("Error loading submissions:",e),S.o.error("Failed to load submissions")}finally{g(!1)}},j=()=>{y(b)};return t?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):e?(0,a.jsx)(n,{user:e,onLogout:()=>{s(null),c([]),x([]),h(null)},children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Student Clearance Dashboard"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage student clearance submissions"})]}),(0,a.jsx)("div",{className:"mt-4 md:mt-0 flex space-x-3",children:(0,a.jsx)("button",{onClick:()=>y(b),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:"Refresh"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:o.length}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Total Submissions"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:o.filter(e=>"Submitted"===e.status).length}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Pending Review"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:o.filter(e=>"Cleared"===e.status).length}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Cleared"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:o.filter(e=>"undergrad"===e.level).length}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Undergraduate"})]})]}),(0,a.jsx)(E,{submissions:m,onViewSubmission:e=>{h(e)},onFiltersChange:e=>{f(e),y(e)},isLoading:p,onSubmissionUpdate:j}),u&&(0,a.jsx)(A,{submission:u,onClose:()=>{h(null)},onUpdate:j})]})}):(0,a.jsx)(d,{onLoginSuccess:e=>{s(e)}})}},7050:(e,s,t)=>{"use strict";t.d(s,{cn:()=>l});var a=t(2596),r=t(9688);function l(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.QP)((0,a.$)(s))}},8118:(e,s,t)=>{Promise.resolve().then(t.bind(t,6867))},8776:(e,s,t)=>{"use strict";t.d(s,{W:()=>l});var a=t(5155),r=t(7050);function l(e){let{status:s,className:t}=e;return(0,a.jsx)("span",{className:(0,r.cn)("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border",(()=>{switch(s){case"Submitted":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"Cleared":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(),t),children:s})}}},e=>{e.O(0,[135,965,562,642,671,355,897,441,964,358],()=>e(e.s=8118)),_N_E=e.O()}]);