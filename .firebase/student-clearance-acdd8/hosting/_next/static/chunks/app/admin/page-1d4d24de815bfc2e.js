(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{2355:(e,s,t)=>{"use strict";t.d(s,{V:()=>n});var a=t(5155);t(2115);var r=t(6874),l=t.n(r),i=t(6766);function n(e){let{currentPage:s="home",showAdminLink:t=!0}=e;return(0,a.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,a.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center h-auto sm:h-16 py-3 sm:py-0",children:[(0,a.jsx)("div",{className:"flex flex-col sm:flex-row items-center space-y-2 sm:space-y-0 sm:space-x-4 mb-3 sm:mb-0",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(i.default,{src:"/SPUP-final-logo.png",alt:"St. Paul University Philippines",width:40,height:40,className:"w-8 h-8 sm:w-10 sm:h-10",priority:!0,unoptimized:!0,onError:e=>{var s;console.log("Logo failed to load, showing fallback");let t=e.target;t.style.display="none";let a=null==(s=t.parentElement)?void 0:s.querySelector(".logo-fallback");a&&(a.style.display="flex")}}),(0,a.jsx)("div",{className:"logo-fallback w-8 h-8 sm:w-10 sm:h-10 bg-primary-600 rounded-full items-center justify-center text-white font-bold text-xs sm:text-sm",style:{display:"none"},children:"SPUP"}),(0,a.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-3",children:(0,a.jsx)("h1",{className:"text-lg sm:text-xl font-semibold text-gray-900 text-center sm:text-left",children:"Student Clearance System"})})]})}),(0,a.jsx)("div",{className:"flex items-center space-x-2 sm:space-x-4",children:(()=>{let e=[];return"home"!==s&&e.push((0,a.jsx)(l(),{href:"/",className:"text-gray-600 hover:text-gray-900 text-sm font-medium px-3 py-2 rounded-md hover:bg-gray-100 transition-colors",children:"New Submission"},"home")),"track"!==s&&e.push((0,a.jsx)(l(),{href:"/track",className:"text-gray-600 hover:text-gray-900 text-sm font-medium px-3 py-2 rounded-md hover:bg-gray-100 transition-colors",children:"Track Submission"},"track")),t&&"admin"!==s&&e.push((0,a.jsx)(l(),{href:"/admin",className:"text-gray-600 hover:text-gray-900 text-sm font-medium px-3 py-2 rounded-md hover:bg-gray-100 transition-colors",children:"Admin Login"},"admin")),e})()})]})})})}},2615:(e,s,t)=>{"use strict";t.d(s,{W:()=>i});var a=t(5155),r=t(2596),l=t(9688);function i(e){let{status:s,className:t}=e;return(0,a.jsx)("span",{className:function(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,l.QP)((0,r.$)(s))}("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border",(()=>{switch(s){case"Submitted":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"Cleared":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(),t),children:s})}},4559:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x});var a=t(5155),r=t(2115),l=t(6316);function i(e){let{onLoginSuccess:s,isLoading:t=!1}=e,[i,n]=(0,r.useState)({email:"",password:""}),[d,c]=(0,r.useState)(""),[o,m]=(0,r.useState)(!1),x=async e=>{e.preventDefault(),c(""),m(!0);try{let e=await (0,l.bN)(i.email,i.password);s(e)}catch(e){c(e instanceof Error?e.message:"Login failed")}finally{m(!1)}},u=(e,s)=>{n(t=>({...t,[e]:s})),d&&c("")};return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"max-w-md w-full space-y-8 p-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"mt-6 text-center text-3xl font-bold text-gray-900",children:"Admin Login"}),(0,a.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Student Clearance System"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsxs)("form",{onSubmit:x,className:"space-y-6",children:[d&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:(0,a.jsx)("p",{className:"text-red-600 text-sm",children:d})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,a.jsx)("input",{id:"email",type:"email",value:i.email,onChange:e=>u("email",e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"cprint@spup.edu.ph",disabled:o||t})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,a.jsx)("input",{id:"password",type:"password",value:i.password,onChange:e=>u("password",e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Enter your password",disabled:o||t})]}),(0,a.jsx)("button",{type:"submit",disabled:o||t,className:"w-full py-3 px-4 rounded-md text-white font-medium transition-colors ".concat(o||t?"bg-gray-400 cursor-not-allowed":"bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500"),children:o?"Signing In...":"Sign In"})]}),(0,a.jsx)("div",{className:"mt-4 text-center",children:(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Only authorized administrators can access this system"})})]})]})})}var n=t(2355);function d(e){let{children:s,user:t,onLogout:r}=e,i=async()=>{try{await (0,l.wu)(),r()}catch(e){console.error("Logout error:",e)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(n.V,{currentPage:"admin",showAdminLink:!1}),(0,a.jsx)("div",{className:"bg-primary-600 border-b border-primary-700",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-12",children:[(0,a.jsxs)("div",{className:"text-sm text-white",children:["Welcome, ",(0,a.jsx)("span",{className:"font-medium",children:t.email})]}),(0,a.jsx)("button",{onClick:i,className:"bg-white/10 hover:bg-white/20 px-3 py-1 rounded-md text-sm font-medium text-white transition-colors",children:"Logout"})]})})}),(0,a.jsx)("main",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:s})]})}var c=t(2615);function o(e){let{submissions:s,onViewSubmission:t,onFiltersChange:l,isLoading:i=!1}=e,[n,d]=(0,r.useState)({level:"all",status:"all",course:"",searchTerm:""}),o=(e,s)=>{let t={...n,[e]:s};d(t),l(t)},m=Array.from(new Set(s.map(e=>e.course).filter(Boolean))).sort();return i?(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading submissions..."})]}):(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["All Submissions (",s.length,")"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),(0,a.jsx)("input",{type:"text",placeholder:"Name, ID, or title...",value:n.searchTerm||"",onChange:e=>o("searchTerm",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Level"}),(0,a.jsxs)("select",{value:n.level||"all",onChange:e=>o("level",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"all",children:"All Levels"}),(0,a.jsx)("option",{value:"undergrad",children:"Undergraduate"}),(0,a.jsx)("option",{value:"grad",children:"Graduate"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,a.jsxs)("select",{value:n.status||"all",onChange:e=>o("status",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"all",children:"All Statuses"}),(0,a.jsx)("option",{value:"Submitted",children:"Submitted"}),(0,a.jsx)("option",{value:"Cleared",children:"Cleared"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Course"}),(0,a.jsxs)("select",{value:n.course||"",onChange:e=>o("course",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"All Courses"}),m.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]})]})]}),(0,a.jsx)("div",{className:"hidden md:block overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Research Title"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Level/Type"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Submitted"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===s.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"px-6 py-8 text-center text-gray-500",children:"No submissions found"})}):s.map(e=>{let s;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[e.studentId," • ",e.course]})]})}),(0,a.jsxs)("td",{className:"px-6 py-4",children:[(0,a.jsx)("div",{className:"text-sm text-gray-900 max-w-xs truncate",children:e.researchTitle}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["Adviser: ",e.adviser]})]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-sm text-gray-900 capitalize",children:e.level}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.researchType})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)(c.W,{status:e.status})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(s=e.submittedAt,new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(s))}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsx)("button",{onClick:()=>t(e),className:"text-blue-600 hover:text-blue-900",children:"View Details"})})]},e.id)})})]})}),(0,a.jsx)("div",{className:"md:hidden divide-y divide-gray-200",children:s.map(e=>(0,a.jsxs)("div",{className:"p-4 hover:bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 text-sm",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.studentId})]}),(0,a.jsx)(c.W,{status:e.status})]}),(0,a.jsxs)("div",{className:"space-y-1 text-xs text-gray-600 mb-3",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Course:"})," ",e.course]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Research:"})," ",e.researchTitle]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Level:"})," ",e.level]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Submitted:"})," ",e.submittedAt.toLocaleDateString()]})]}),(0,a.jsx)("button",{onClick:()=>t(e),className:"w-full bg-primary-600 hover:bg-primary-700 text-white text-sm py-2 px-3 rounded-md transition-colors",children:"View Details"})]},e.id))})]})}function m(e){let s,{submission:t,onClose:i,onUpdate:n}=e,[d,o]=(0,r.useState)(!1),m=async e=>{o(!0);try{await (0,l.qT)(t.id,e),n(),i()}catch(e){console.error("Error updating status:",e),alert("Failed to update status. Please try again.")}finally{o(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2 sm:p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-screen overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Submission Details"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["ID: ",t.id]})]}),(0,a.jsx)("button",{onClick:i,className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\xd7"})]}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Status:"}),(0,a.jsx)(c.W,{status:t.status})]}),(0,a.jsx)("div",{className:"flex space-x-2",children:(0,a.jsxs)("button",{onClick:()=>{t.zipFile?window.open(t.zipFile,"_blank"):alert("ZIP file not available")},className:"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center space-x-2",children:[(0,a.jsx)("span",{children:"\uD83D\uDCE6"}),(0,a.jsxs)("span",{children:["Download ZIP (",t.id,".zip)"]})]})})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-600 bg-white rounded p-3",children:[(0,a.jsx)("p",{className:"font-medium mb-2",children:"\uD83D\uDCC1 ZIP file contains:"}),(0,a.jsxs)("ul",{className:"space-y-1 ml-4",children:[(0,a.jsx)("li",{children:"• approval_sheet.pdf"}),(0,a.jsx)("li",{children:"• full_paper.docx (includes ethics clearance in appendix)"}),(0,a.jsx)("li",{children:"• long_abstract.docx"}),(0,a.jsx)("li",{children:"• journal_format.docx"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 border-b border-gray-200 pb-2",children:"Student Information"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:t.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:t.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Student ID"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:t.studentId})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Course"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:t.course})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Level"}),(0,a.jsx)("p",{className:"text-sm text-gray-900 capitalize",children:t.level})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 border-b border-gray-200 pb-2",children:"Research Information"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Research Title"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:t.researchTitle})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Research Type"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:t.researchType})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Adviser"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:t.adviser})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Submitted At"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:(s=t.submittedAt,new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(s))})]})]})]})]}),"undergrad"===t.level&&t.groupMembers&&t.groupMembers.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 border-b border-gray-200 pb-2 mb-3",children:"Group Members"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:t.groupMembers.map((e,s)=>(0,a.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.studentID})]},s))})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[(0,a.jsx)("button",{onClick:i,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Close"}),"Submitted"===t.status&&(0,a.jsx)("button",{onClick:()=>m("Cleared"),disabled:d,className:"px-4 py-2 rounded-md text-sm font-medium text-white transition-colors ".concat(d?"bg-gray-400 cursor-not-allowed":"bg-primary hover:bg-primary-700"),children:d?"Updating...":"Mark as Cleared"}),"Cleared"===t.status&&(0,a.jsx)("button",{onClick:()=>m("Submitted"),disabled:d,className:"px-4 py-2 rounded-md text-sm font-medium text-white transition-colors ".concat(d?"bg-gray-400 cursor-not-allowed":"bg-yellow-600 hover:bg-yellow-700"),children:d?"Updating...":"Mark as Submitted"})]})]})]})})}function x(){let[e,s]=(0,r.useState)(null),[t,n]=(0,r.useState)(!0),[c,x]=(0,r.useState)([]),[u,h]=(0,r.useState)([]),[p,g]=(0,r.useState)(null),[b,y]=(0,r.useState)(!1),[f,j]=(0,r.useState)({});(0,r.useEffect)(()=>{let e=(0,l.Bh)(e=>{s(e),n(!1),e&&v()});return()=>e()},[]);let v=async e=>{y(!0);try{let s=await (0,l.Rh)(e);x(s),h(s)}catch(e){console.error("Error loading submissions:",e),alert("Failed to load submissions")}finally{y(!1)}};return t?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):e?(0,a.jsx)(d,{user:e,onLogout:()=>{s(null),x([]),h([]),g(null)},children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Student Clearance Dashboard"}),(0,a.jsx)("button",{onClick:()=>v(f),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:"Refresh"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:c.length}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Total Submissions"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:c.filter(e=>"Submitted"===e.status).length}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Pending Review"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:c.filter(e=>"Cleared"===e.status).length}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Cleared"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:c.filter(e=>"undergrad"===e.level).length}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Undergraduate"})]})]}),(0,a.jsx)(o,{submissions:u,onViewSubmission:e=>{g(e)},onFiltersChange:e=>{j(e),v(e)},isLoading:b}),p&&(0,a.jsx)(m,{submission:p,onClose:()=>{g(null)},onUpdate:()=>{v(f)}})]})}):(0,a.jsx)(i,{onLoginSuccess:e=>{s(e)}})}},6316:(e,s,t)=>{"use strict";t.d(s,{bN:()=>b,wu:()=>y,Rh:()=>p,hx:()=>h,Bh:()=>f,cq:()=>u,qT:()=>g});var a=t(5317),r=t(7505),l=t(5404),i=t(9311),n=t.n(i);let d=(0,t(3915).Wp)({apiKey:"AIzaSyDQ_OoviqBwI2-po-yFgDmElp5Gu1Roos8",authDomain:"student-clearance-acdd8.firebaseapp.com",projectId:"student-clearance-acdd8",storageBucket:"student-clearance-acdd8.firebasestorage.app",messagingSenderId:"384361416984",appId:"1:384361416984:web:088ba8a9f6be56ad8a366d",measurementId:"G-K0FBFQ3WGD"}),c=(0,l.xI)(d),o=(0,a.aU)(d),m=(0,r.c7)(d);var x=t(9427);async function u(e){try{let s=(0,x.g)(),t=new(n());if(e.documents){let s=Object.entries(e.documents).map(async e=>{let[s,a]=e;if(a){let e=a.name.split(".").pop(),r="";switch(s){case"approvalSheet":r="approval_sheet.".concat(e);break;case"fullPaper":r="full_paper.".concat(e);break;case"longAbstract":r="long_abstract.".concat(e);break;case"journalFormat":r="journal_format.".concat(e);break;default:r="".concat(s,".").concat(e)}let l=await a.arrayBuffer();t.file(r,l)}});await Promise.all(s)}let l=await t.generateAsync({type:"blob"}),i="".concat(s,".zip"),d=(0,r.KR)(m,"submissions/".concat(i)),c=await (0,r.D)(d,l),u=await (0,r.qk)(c.ref),h={id:s,level:e.level,name:e.name,email:e.email,studentId:e.studentId,adviser:e.adviser,course:e.course,researchTitle:e.researchTitle,researchType:e.researchType,zipFile:u,status:"Submitted",submittedAt:a.Dc.fromDate(new Date)};if("undergrad"===e.level&&e.groupMembers&&e.groupMembers.length>0){let s=e.groupMembers.filter(e=>e.name.trim()&&e.studentID.trim());s.length>0&&(h.groupMembers=s)}let p=(0,a.H9)(o,"submissions",s);return await (0,a.BN)(p,h),s}catch(e){throw console.error("Error submitting clearance:",e),Error("Failed to submit clearance request. Please try again.")}}async function h(e){try{let t=(0,a.H9)(o,"submissions",e),r=await (0,a.x7)(t);if(!r.exists())return null;{var s;let e=r.data();return{...e,id:r.id,submittedAt:(null==(s=e.submittedAt)?void 0:s.toDate())||new Date}}}catch(e){throw console.error("Error fetching submission:",e),Error("Failed to fetch submission details")}}async function p(e){try{let s=(0,a.rJ)(o,"submissions"),t=[];(null==e?void 0:e.level)&&"all"!==e.level&&t.push((0,a._M)("level","==",e.level)),(null==e?void 0:e.status)&&"all"!==e.status&&t.push((0,a._M)("status","==",e.status)),(null==e?void 0:e.course)&&t.push((0,a._M)("course","==",e.course)),t.push((0,a.My)("submittedAt","desc"));let r=(await (0,a.GG)((0,a.P)(s,...t))).docs.map(e=>{var s;let t=e.data();return{...t,id:e.id,submittedAt:(null==(s=t.submittedAt)?void 0:s.toDate())||new Date}});if(null==e?void 0:e.searchTerm){let s=e.searchTerm.toLowerCase();r=r.filter(e=>e.name.toLowerCase().includes(s)||e.studentId.toLowerCase().includes(s)||e.researchTitle.toLowerCase().includes(s)||e.email.toLowerCase().includes(s))}return r}catch(e){throw console.error("Error fetching submissions:",e),Error("Failed to fetch submissions")}}async function g(e,s){try{let t=(0,a.H9)(o,"submissions",e);await (0,a.mZ)(t,{status:s})}catch(e){throw console.error("Error updating submission status:",e),Error("Failed to update submission status")}}async function b(e,s){try{if("cprint@spup.edu.ph"!==e)throw Error("Unauthorized email address");return(await (0,l.x9)(c,e,s)).user}catch(e){if(console.error("Error during admin login:",e),e&&"object"==typeof e&&"code"in e){if("auth/user-not-found"===e.code)throw Error("Admin account not found");if("auth/wrong-password"===e.code)throw Error("Invalid password");if("auth/invalid-email"===e.code)throw Error("Invalid email format")}if(e instanceof Error&&"Unauthorized email address"===e.message)throw e;throw Error("Login failed. Please try again.")}}async function y(){try{await (0,l.CI)(c)}catch(e){throw console.error("Error during logout:",e),Error("Logout failed")}}function f(e){return(0,l.hg)(c,e)}},8118:(e,s,t)=>{Promise.resolve().then(t.bind(t,4559))},9427:(e,s,t)=>{"use strict";function a(){let e=new Date().getFullYear(),s=Math.random().toString(36).substr(2,6).toUpperCase();return"SPUP_Clearance_".concat(e,"_").concat(s)}function r(e){return/^SPUP_Clearance_\d{4}_[A-Z0-9]{6}$/.test(e)}t.d(s,{f:()=>r,g:()=>a})}},e=>{e.O(0,[135,965,562,441,964,358],()=>e(e.s=8118)),_N_E=e.O()}]);